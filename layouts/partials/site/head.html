{{ $url := urls.Parse .Site.BaseURL }}
{{ $theme := .Site.Params.theme }}
{{ if .Params.theme }}
	{{ $theme = .Params.theme }}
{{ end }}
{{ $theme_path := printf "theme/%s.html" $theme }}

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="title" content="{{.Param "title"}}">
<meta name="hostname" content="{{$url.Host}}">
<meta name="mobile-web-app-capable" content="yes">
<meta name="keywords" content="{{ with .Params.Keywords }}{{ delimit . ", " }}{{ else }}{{ .Params.Keywords }}{{ end }}" />
{{ hugo.Generator }}
{{ if isset .Site.Params "theme_color" }}<meta name="theme-color" content="{{.Site.Param "theme_color"}}">{{ end }}
{{ if isset .Params "description" }}<meta name="description" content='{{ .Param "description" }}'>{{ end }}
{{ if .Params.theme }}<meta name="theme" content="{{ $theme }}">{{ end }}
{{ template "_internal/twitter_cards.html" . }}

<title>{{ .Site.Title }}{{with .Page.Title}}/{{.}}{{end}}</title>

{{ partial $theme_path . }}
<link rel="stylesheet" href="{{ (resources.Get "style.css" | resources.Minify).Permalink }}"/>
{{ block "css" . }}{{ end }}
{{ partial "site/favicons" . }}
<link rel="manifest" href="{{ .Site.BaseURL }}/manifest.json">

{{ range .AlternativeOutputFormats -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s"/>` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
{{ end -}}

<script src="{{ (resources.Get "js/app.js" | resources.Minify).RelPermalink }}"></script>
<script src="{{ (resources.Get "js/theme.js" | resources.Minify).RelPermalink }}"></script>

{{ if ne (getenv "HUGO_ENV") "production" | or (ne .Site.Params.env "production") }}
<script>console.log('PageType: {{ .Page.Type }}');</script>
{{ end }}
